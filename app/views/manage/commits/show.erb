<% @title = @commit.pod_version.pod.name %>

<div class="page-header">
  <h1><%= @commit.pod_version.pod.name %> <small><%= @commit.pod_version.name %></small></h1>
</div>

<dl class="dl-horizontal">
  <dt>Status</dt>
  <dd>
    <% if @commit.pushed? %>
      <span class="label label-success">Pushed</span>
    <% elsif @commit.pushed? == false %>
      <span class="label label-important">Failed</span>
    <% else %>
      <span class="label">In progress</span>
    <% end %>
  </dd>
  <dt>Id</dt>
  <dd><%= @commit.id %></dd>
  <dt>SHA</dt>
  <dd><%= @commit.sha %><dd>
  <dt>Specification Data</dt>
  <!-- TODO Don't show it all. Make either expandable or link to another controller action. -->
  <dd><%= @commit.specification_data %></dd>
</dl>

<hr>

<% @commit.push_jobs.each do |job| %>
  <% if params[:progress] == 'true' %>
    <h3><%= job.tasks_completed %> out of <%= Pod::TrunkApp::PushJob.tasks.size %> tasks completed</h3>
    <div class="progress progress-striped <%= 'active' if job.in_progress? %>">
      <div class="bar" style="width: <%= (100.0 / Pod::TrunkApp::PushJob.tasks.size) * job.tasks_completed %>%;"></div>
    </div>
    <hr>
  <% end%>
<% end %>

<hr>

<h3>Specification JSON</h3>
<pre><code><%= @commit.specification_data %></code></pre>
